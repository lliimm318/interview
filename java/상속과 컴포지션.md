# 상속(inheritance)과 컴포지션(composition)

> 여기서의 상속은 클래스가 다른 클래스를 확장하는 구현 상속을 말한다. (인터페이스가 다른 인터페이스를 상속하는 인터페이스 상속 X)

#### 상속
- 하위 클래스가 상위 클래스의 특성의 재정의 한 것 (IS-A 관계)

#### 컴포지션
- 기존 클래스가 새로운 클래스의 구성 요소가 되는 것 (HAS-A 관계)
  

느슨하게 결합된 코드는 더 많은 유연성을 제공한다. 그래서 상속보다는 컴포지션 사용을 권장한다.

이펙티브 자바에서도 상속보다 컴포지션을 권장한다. 하지만 **권장**이며 모든 프로그래밍 시나리오에 대해 컴포지션을 사용하면 되는 것은 아니다.

## 상속 단점

1. 캡슐화 위반
- 상위 클래스 구현에 따라 하위 클래스 동작에 문제가 생길 수 있음
- 상위 클래스 구현이 달라지면 하위 클래스를 수정해야 함

2. 유연하지 못한 설계
- 컴파일 시점에 타입이 지정된다

3. 다중 상속
- 자바 다중 상속 못해요 -> 다른 클래스를 상속 받고 있으면 추가적으로 상속 받을 수 없음

## 컴포지션
기존 클래스를 확장하는 대신, 새로운 클래스를 만들고 private 필드로 기존 클래스의 인스턴스를 참조하는 방법을 통해 기능을 확장시키는 것

새로운 클래스의 인스턴스 메서드들은 private 필드로 참조하는 기존 클래스의 forwarding method를 호출해 그 결과를 반환하며, 이를 forwarding(전달)이라 한다. 
이렇게 구현하면 새로운 클래스는 기존 클래스의 내부 구현 방식의 영향에서 벗어날 수 있으며, 기존 클래스에 새로운 메서드가 추가되더라도 전혀 영향을 받지 않는다.


상속 방식은 구체 클래스 각각을 따로 확장해야 하며, 지원하고 싶은 상위 클래스의 생성자에 대응하는 생성자를 별도로 정의해줘야한다. 
하지만, 컴포지션 방식은 한 번만 구현해두면 어떠한 구현체라도 계측할 수 있으며, 기존 생성자들과도 함께 사용할 수 있다.


### 읽어보시라요
- https://iyoungman.github.io/designpattern/Inheritance-and-Composition/
