# IoC와 DI
## IoC(Inversion of Control)
객체 관리 권한이 개발자에서 프레임워크로 넘어가서 이를 제어 역전이라고 부른다.
스프링은 자바 객체를 new로 생성하여 개발자가 관리하는 것이 아닌, spring container에 모두 맡긴다.

프레임워크를 적용하지 않은 경우, 객체의 생명주기 (객체 생서으 초기화, 메소드 호출 등)를 클라이언트 구현 객체가 직접 관리한다.
또한 라이브러리를 호출해도 해당 코드의 호출 시점 역시 직접 관리한다. 

스프링과 같은 프레임워크를 적용한 경우, Controller, Service 같은 객체들의 동작을 우리가 구현한다. 그러나 프로그램의 제어권은 프레임 워크가 가진다.
해당 객체를 언제 호출할지는 개발자가 신경쓰지 않는다. 프레임워크가 요구하는 대로 객체를 생성하면 프레임워크가 해당 객체를 생성, 호출 소멸한다. **프로그램의 제어권이 역전**된 것이다.

### 라이브러리와 프레임워크 차이
프레임워크와 라이브러리의 차이는 IoC를 통해 설명 가능하다. 
라이브러리의 경우 어플리케션의 제어 흐름을 라이브러리에 넘겨주지 않고, 필요한 시점에 라이브러리에 작성된 객체를 적재적소에 가져다 쓸 뿐이다.

하지만 프레임워크의 경우 어플리케이션 코드에 작성한 객체들을 프레임워크가 필요한 시점에 가져다가 프로그램을 구동하여 프로그램의 제어권이 프레임 워크로 역전된다.

### 쟝점
- 프로그램의 진행 흐름과 구체적인 구현을 분리할 수 있다
- 개발자는 비지니스 로직에 집중할 수 있다.
- 구현체 사이의 변경이 용이하다
- 객체 간 의존성이 낮아진다.
<br/><br>
## DI(Dependency Injection)
IoC와 DI는 전혀 다른 개념이다!!!

IoC는 프로그램 제어권을 역전 시키고, DI는 해당 개념을 구현하기 위해 사용하는 디자인 패턴 중 하나로, 의존 관계를 외부에서 주입시키는 패턴이다.

### 의존성이란
``` java
public class A() {
  private B b = new B();
}
``` 
위 와 같은 코드가 있다. 여기에서 B클래스 내부에 final 필드를 추가하면 A클래스는 컴파일 에러가 난다.
B만 변경 했는데 A까지 영향을 준다. 이런 경우 A가 B에 의존한다!

``` java
public class A {
    private B b;
    
    public A(B b) {
        this.b = b;
    }
}
``` 
이 코드도 A는 B에 의존한다. 그러나 의존 대상을 직접 생성하지 않고 외부로부터 주입 받는다 (의존성 주입)
위 코드는 주입 대상인 B인스턴스들 간의 상태 차이만 있지만, B를 인터페이스로 추상화하면 다양한 구현체가 들어옴으로써 의존성을 다각화할 수 있다.

### 의존성 주입 방법
- 클래스 모델이나 코드에는 런타임 시점의 의존관계가 드러나지 않는다. 그러기 위해 인터페이스만 의존해야한다. 
- 런타임 시점의 의존관계는 컨테이너 혹은 팩토리 같은 제 3의 존재가 결정한다.
- 의존관계는 사용할 오브젝트에 대한 레퍼런스를 외부에서 주입해줌으로써 만들어진다.

1. 생성자 주입
``` java
public class A {
    private B b;
    
    public A(B b) {
        this.b = b;
    }
}
```
스프링에서 권장하는 방식이다.

2. Setter 주입
``` java
public class A {
    private B b;
    
    public void setB(B b) {
        this.b = b;
    }
}
```

3. 인터페이스 주입
``` java
public interface BInjection {
    void inject(B b);
}

public A implements BInjection {
    private B b;
    
    @Override
    public void inject(B b) {
        this.b = b;
    }
}
```
어떤 의존성을 주입할지 인터페이스에 명시하고, 의존성을 주입 받는 클래스에서 해당 인터페이스의 구현체로 만드는 방법


### 장점
- 의존성이 줄어든다. (변경에 덜 취약해짐)
- 부모
